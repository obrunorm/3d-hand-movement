<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Hand Detection</title>

  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>

  <style>
      video, canvas {
          position: absolute;
          top: 0;
          left: 0;
      }
  </style>
</head>

<body>
    <video id="camera" width="640" height="480" autoplay></video>
    <canvas id="output" width="640" height="480"></canvas>

    <script>
        const video = document.getElementById("camera");
        const canvas = document.getElementById("output");
        const ctx = canvas.getContext("2d");

        const hands = new Hands({
            locateFile: file =>
                `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
        });

        hands.setOptions({
            maxNumHands: 1,
            minDetectionConfidence: 0.5,
            minTrackingConfidence: 0.5
        });

        hands.onResults(results => {
            ctx.save();
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(results.image, 0, 0, canvas.width, canvas.height);

            if (results.multiHandLandmarks) {
                for (const lm of results.multiHandLandmarks) {
                    drawConnectors(ctx, lm, HAND_CONNECTIONS, {color: "#00FF00", lineWidth: 3});
                    drawLandmarks(ctx, lm, {color: "#FF0000", lineWidth: 2});
                }
            }

            ctx.restore();
        });

        const camera = new Camera(video, {
            width: 640,
            height: 480,
            onFrame: async () => {
                await hands.send({image: video});
            }
        });

        camera.start();
    </script>
</body>
</html>
